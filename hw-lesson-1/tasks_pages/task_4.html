<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 4 - Bank Account</title>
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
    <div id="app">
        <div class="task-container">
            <div class="content-wrapper">
                <h2>Task 4 - Bank Account</h2>
                <div class="task-description">
                    <p>"–†–∞—Ö—É–Ω–æ–∫ —É –±–∞–Ω–∫—É"</p>
                    <p>–í–∏–º–æ–≥–∏:</p>
                    <ul>
                        <li>–°–ø–æ—á–∞—Ç–∫—É —Å—É–º–∞ –¥–æ—Ä—ñ–≤–Ω—é—î 0–≥—Ä–Ω. –ó–º—ñ–Ω–∏—Ç–∏ —Å—É–º—É —É –≥—Ä–∏–≤–Ω—è—Ö –º–æ–∂–Ω–∞ –∞–±–æ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫, –∞–±–æ –∑–Ω—è—Ç—Ç—è–º</li>
                        <li>–°—É–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å—Å—è —É –¥–æ–ª–∞—Ä–∏ —Ç–∞ —î–≤—Ä–æ (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –∫—É—Ä—Å –∑–∞–¥–∞—î—Ç—å—Å—è —É data)</li>
                        <li>–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å—É–º—É (–∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏, —â–æ–± –Ω–µ –±—É–ª–∞ –≤—ñ–¥'—î–º–Ω–æ—é)</li>
                        <li>–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–Ω—è—Ç–∏ (—â–æ–± –Ω–µ –º–æ–∂–Ω–∞ –∑–Ω—è—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ —î –Ω–∞ —Ä–∞—Ö—É–Ω–∫—É)</li>
                        <li>–ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–Ω—è—Ç—Ç—è —ñ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –≤–∏—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ 3% –≤—ñ–¥ —Å—É–º–∏ (–≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)</li>
                    </ul>
                    <p>–ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—É–º–∏:</p>
                    <ul>
                        <li>–Ø–∫—â–æ –±—É–ª–æ –∑–Ω—è—Ç—Ç—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º</li>
                        <li>–Ø–∫—â–æ –±—É–ª–æ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∑–µ–ª–µ–Ω–∏–º</li>
                        <li>–Ø–∫—â–æ —Å—É–º–∞ –≤–∞–ª—é—Ç–∏ –º–µ–Ω—à–∞ –∑–∞ 100 —Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —ñ–Ω–∞–∫—à–µ - –∑–µ–ª–µ–Ω–∏–º</li>
                    </ul>
                </div>
                <p>üí∞ Bank Account Balance: 
                    <span :class="balanceClass">{{ formattedBalances.balanceUAH }} –≥—Ä–Ω</span>
                </p>
                <p>üíµ Balance in USD: 
                    <span :class="balanceClassUSD">${{ formattedBalances.balanceUSD }}</span>
                </p>
                <p>üí∂ Balance in EUR: 
                    <span :class="balanceClassEUR">‚Ç¨{{ formattedBalances.balanceEUR }}</span>
                </p>
                <div class="input-container">
                    <input 
                        v-model.number="amount" 
                        type="number" 
                        min="0" 
                        @input="validateAmount"
                        placeholder="Enter amount"
                    >
                </div>
                <div class="action-buttons">
                    <button 
                        @click="handleTransaction('deposit')" 
                        :disabled="!validAmount"
                    >
                        Deposit
                    </button>
                    <button 
                        @click="handleTransaction('withdraw')" 
                        :disabled="!validAmount || !canWithdraw"
                    >
                        Withdraw
                    </button>
                </div>
                <p>üìä Transaction fee: {{ validAmount ? currentFee : '0.00' }} –≥—Ä–Ω</p>
            </div>
            <div class="task-footer">
                <button class="back-btn" @click="goBack">Back</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const BANK_CONFIG = {
            TRANSACTION: {
                FEE_RATE: 0.03,
                MIN_BALANCE: 100
            },
            EXCHANGE_RATES: {
                USD: 42.10,
                EUR: 43.39
            },
            TRANSACTION_TYPES: {
                DEPOSIT: 'deposit',
                WITHDRAW: 'withdraw'
            }
        };

        const app = Vue.createApp({
            data() {
                return {
                    balance: 0,
                    amount: null,
                    validAmount: false,
                    lastTransactionType: null
                };
            },
            computed: {
                formattedBalances() {
                    const { USD, EUR } = BANK_CONFIG.EXCHANGE_RATES;
                    return {
                        balanceUSD: (this.balance / USD).toFixed(2),
                        balanceEUR: (this.balance / EUR).toFixed(2),
                        balanceUAH: this.balance.toFixed(2)
                    };
                },
                balanceClass() {
                    if (!this.lastTransactionType) return 'balance neutral';
                    return this.lastTransactionType === BANK_CONFIG.TRANSACTION_TYPES.DEPOSIT ? 'balance green' : 'balance red';
                },
                balanceClassUSD() {
                    return parseFloat(this.formattedBalances.balanceUSD) >= BANK_CONFIG.TRANSACTION.MIN_BALANCE ? 'balance green' : 'balance red';
                },
                balanceClassEUR() {
                    return parseFloat(this.formattedBalances.balanceEUR) >= BANK_CONFIG.TRANSACTION.MIN_BALANCE ? 'balance green' : 'balance red';
                },
                currentFee() {
                    return (this.amount * BANK_CONFIG.TRANSACTION.FEE_RATE).toFixed(2);
                },
                canWithdraw() {
                    return (this.amount + this.amount * BANK_CONFIG.TRANSACTION.FEE_RATE) <= this.balance;
                }
            },
            methods: {
                validateAmount() {
                    this.validAmount = this.amount > 0;
                },
                handleTransaction(type) {
                    if (!this.validAmount || (type === BANK_CONFIG.TRANSACTION_TYPES.WITHDRAW && !this.canWithdraw)) {
                        return;
                    }

                    const fee = this.amount * BANK_CONFIG.TRANSACTION.FEE_RATE;
                    const operations = {
                        [BANK_CONFIG.TRANSACTION_TYPES.DEPOSIT]: () => this.balance += this.amount - fee,
                        [BANK_CONFIG.TRANSACTION_TYPES.WITHDRAW]: () => this.balance -= this.amount + fee
                    };

                    operations[type]();
                    this.lastTransactionType = type;
                    this.amount = 0;
                    this.validAmount = false;
                },
                goBack() {
                    window.location.href = '../index.html';
                }
            }
        });

        app.mount('#app');
    </script>
</body>
</html>
